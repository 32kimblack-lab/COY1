rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {
    // Public read access for ALL images and media files
    // This allows the web profile page to display images without authentication
    match /profile_images/{allPaths=**} {
      allow read: if true; // Public read access
      allow write, delete: if request.auth != null;
    }
    
    match /background_images/{allPaths=**} {
      allow read: if true; // Public read access
      allow write, delete: if request.auth != null;
    }
    
    match /collection_images/{allPaths=**} {
      allow read: if true; // Public read access
      allow write, delete: if request.auth != null;
    }
    
    match /posts/{allPaths=**} {
      allow read: if true; // Public read access for all post media
      allow write, delete: if request.auth != null;
    }
    
    // Default: authenticated users can read/write everything else
    match /{allPaths=**} {
      allow read, write, delete: if request.auth != null;
    }
  }
}
